@model EmployeeSalary
@inject IViewLocalizer localizer
@{
    ViewData["Title"] = localizer["Employee Salaries"];
}

<!-- Main-body start -->
<div class="main-body">
    <div class="page-wrapper">
        <div class="row">
            <div class="col-lg-10 col-md-12 col-sm-12" style="margin:0 auto;">
                <!-- Page-header start-->
                <div class="page-header card">
                    <div class="card-block">
                        <h5 class="m-b-10">@localizer["Employee Salaries Administration"]</h5>
                        <ul class="breadcrumb-title b-t-default p-t-10">
                            <li class="breadcrumb-item pull-right">
                                <a asp-action="Index" asp-controller="Employee"
                                   class="btn btn-mat btn-primary mr-2" style="color: white;">
                                    <i class="fa fa-list"></i> @localizer["Employees List"]
                                </a>
                                <a class="btn btn-mat btn-primary mr-2" style="color:white;"
                                   asp-controller="Employee"
                                   asp-action="EmployeeSalaries"
                                   asp-route-month="0"
                                   asp-route-year="0">
                                    <i class="fa fa-list"></i> @localizer["Employee Salary List"]
                                </a>
                                <a asp-action="FiredEmployeeList" asp-controller="Employee"
                                   class="btn btn-mat btn-primary mr-2" style="color: white;">
                                    <i class="fa fa-list"></i> @localizer["Fire/Leave Employe"]
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Page-header end -->
                <!-- Page-body start -->

                <div class="page-body">
                    <div class="card">
                        <div class="card-header">
                            <h5>@localizer["Employee Salary Details"]</h5>
                            <div class="card-header-right">
                                <ul class="list-unstyled card-option">
                                    <li><i class="fa fa-chevron-left"></i></li>
                                    <li><i class="fa fa-window-maximize full-card"></i></li>
                                    <li><i class="fa fa-minus minimize-card"></i></li>
                                    <li><i class="fa fa-refresh reload-card"></i></li>
                                    <li><i class="fa fa-times close-card"></i></li>
                                </ul>
                            </div>
                        </div>

                        <div class="card-block table-border-style">
                            <div class="row">
                                <div class="col-12">
                                    <h6>@localizer["Employee Info"]</h6>
                                    <hr />
                                </div>

                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <h5>@localizer["Employee Name"]</h5>
                                    <p>@ViewBag.Name</p>
                                    <hr />
                                </div>
                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <h5>@localizer["Father Name"]</h5>
                                    <p>@ViewBag.Fathername</p>
                                    <hr />
                                </div>

                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <h5>@localizer["Designation Name"]</h5>
                                    <p>@ViewBag.DesignationName</p>
                                    <hr />
                                </div>

                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <h5>@localizer["Email"]</h5>
                                    <p>@ViewBag.Email</p>
                                    <hr />
                                </div>

                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <h5>@localizer["Phone"]</h5>
                                    <p>@ViewBag.Phone</p>
                                    <hr />
                                </div>

                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <h5>@localizer["HireDate"]</h5>
                                    <p>@ViewBag.Hidredate</p>
                                    <hr />
                                </div>

                                <div class="col-lg-3 col-md-4 col-sm-6">
                                    <h5>@localizer["Address"]</h5>
                                    <p>@ViewBag.Address</p>
                                    <hr />
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Basic table card end -->
                </div>

                <!-- Page-body end -->
                <div class="page-body">
                    <div class="row">
                        <div class="col-md-12">
                            <!-- Basic Form Inputs card start -->
                            <div class="card">
                                <div class="card-header">
                                    <h5>@localizer[""]Add a new Employee</h5>
                                    <div class="card-header-right">
                                        <i class="icofont icofont-spinner-alt-5"></i>
                                    </div>
                                    <div class="card-header-right">
                                        <i class="icofont icofont-spinner-alt-5"></i>
                                    </div>
                                    <hr />
                                </div>
                                <div class="card-block">
                                    <div class="col-sm-12 text text-center">
                                        <div asp-validation-summary="All" class="text-danger"></div>
                                    </div>
                                    <div class="col-lg-12 col-md-12 col-sm-12" style="margin: 0 auto;">
                                        <form method="POST" asp-action="EmployeeSalaryEdit" asp-controller="Employee">

                                            <div class="row">
                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label>@localizer["Year"]</label>
                                                        <select class="form-control select2" style="width: 100%;" asp-for="SalaryYear">
                                                            <option selected="selected" value="0">@localizer["Select Year"]</option>
                                                            @*<option value="@ViewBag.CurrenYear">@ViewBag.CurrenYear</option>
                                                                @for (int i = ViewBag.CurrenYear - 1; i > ViewBag.CurrenYear - 5; i--)
                                                                {
                                                                    <option value="@i">@i</option>
                                                                }*@

                                                            <option value="2022">2022</option>
                                                            <option value="2023">2023</option>
                                                            <option value="2024">2024</option>
                                                            <option value="2025">2025</option>
                                                            <option value="2026">2026</option>
                                                        </select>
                                                    </div>
                                                    <span asp-validation-for="SalaryYear"></span>
                                                </div>


                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label>@localizer["Month"]</label>
                                                        <select class="form-control select2" style="width: 100%;" asp-for="SalaryMonth">
                                                            <option selected="selected" value="0">@localizer["Select Month"]</option>
                                                            <option value="1">@localizer["January"]</option>
                                                            <option value="2">@localizer["Feberuy"]</option>
                                                            <option value="3">@localizer["March"]</option>
                                                            <option value="4">@localizer["April"]</option>
                                                            <option value="5">@localizer["May"]</option>
                                                            <option value="6">@localizer["June"]</option>
                                                            <option value="7">@localizer["July"]</option>
                                                            <option value="8">@localizer["Augest"]</option>
                                                            <option value="9">@localizer["September"]</option>
                                                            <option value="10">@localizer["October"]</option>
                                                            <option value="11">@localizer["November"]</option>
                                                            <option value="12">@localizer["December"]</option>
                                                        </select>
                                                    </div>
                                                    <span asp-validation-for="SalaryMonth" class="text-danger"></span>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label>@localizer["Payment Date"]</label>
                                                        <div class="input-group date">
                                                            <input type="date" id="DueDate" name="DueDate" asp-for="DueDate" class="form-control" aria-invalid="false" placeholder="yyyy/mm/dd">
                                                            <div class="input-group-addon">
                                                                <i class="fa fa-calendar"></i>
                                                            </div>
                                                        </div>
                                                        <span asp-validation-for="DueDate" class="text-danger"></span>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label>@localizer["Basic Salary"]</label>
                                                        <input type="number" step="any" id="basicSalary" class="form-control" value="@ViewBag.BaseSalary" readonly>

                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label>@localizer["Monthly Work Days"]</label>
                                                        <input type="text" step="any" id="totalDays" onkeypress="ChangeNumbers1(event, 'totalDays');" oninput="ChangeNumbers2(event, 'totalDays');" class="form-control" value="26">
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="TotalWorkDays" class="control-label">@localizer["Present Working Days"]</label>
                                                        <div class="input-group">
                                                            <input type="number" step="any" id="totalWorkingDays" onkeypress="ChangeNumbers1(event, 'totalWorkingDays');" oninput="ChangeNumbers2(event, 'totalWorkingDays');" class="form-control" value="26" asp-for="TotalWorkDays">
                                                            <span asp-validation-for="TotalWorkDays" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="OverTime" class="control-label">@localizer["OverTime Amount"]</label>
                                                        <div class="input-group">
                                                            <input type="number" step="any" id="overTime" onkeypress="ChangeNumbers1(event, 'overTime');" oninput="ChangeNumbers2(event, 'overTime');" class="form-control" asp-for="OverTime">
                                                            <span asp-validation-for="OverTime" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <label asp-for="Bounce" class="control-label">@localizer["Bounce Amount"]</label>
                                                    <div class="form-group">
                                                        <input type="text" asp-for="Bounce" class="form-control" id="bonus" required autocomplete="off" min="1" onkeypress="ChangeNumbers1(event, 'bonus');" oninput="ChangeNumbers2(event, 'bonus');" />
                                                        <span asp-validation-for="Bounce" class="text-danger"></span>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <label asp-for="Tax" class="control-label">@localizer["Tax Amount"]</label>
                                                    <div class="form-group">
                                                        <input type="text" step="any" id="tax" class="form-control" asp-for="Tax" onkeypress="ChangeNumbers1(event, 'tax');" oninput="ChangeNumbers2(event, 'tax');">
                                                        <span asp-validation-for="Tax" class="text-danger"></span>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label class="control-label">@localizer["Net Salary"]</label>
                                                        <input type="number" step="any" id="netSalary" class="form-control" asp-for="NetSalary" readonly>
                                                        <span asp-validation-for="NetSalary" class="text-danger"></span>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label class="control-label">@localizer["Paid Amount"]</label>
                                                        <input type="number" step="any" id="paid" class="form-control" asp-for="Paid" onkeypress="ChangeNumbers1(event, 'paid');" oninput="ChangeNumbers2(event, 'paid');">
                                                        <span asp-validation-for="Paid" class="text-danger"></span>
                                                    </div>
                                                </div>

                                                <div class="col-lg-4 col-md-8 col-sm-12">
                                                    <div class="form-group">
                                                        <label class="control-label">@localizer[""]Belance</label>
                                                        <input type="number" step="any" id="balanced" class="form-control" asp-for="Balanced" readonly>
                                                        <span asp-validation-for="Balanced" class="text-danger"></span>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <input type="hidden" asp-for="TransCode" />
                                                    <input type="hidden" hidden asp-for="Id" />
                                                    <input type="hidden" asp-for="EmployeeId" value="@ViewBag.Id" />
                                                    <input type="hidden" asp-for="CreatedAt" />
                                                    <div class="col-sm-12 text text-left">
                                                        <button type="submit" class="btn btn-mat btn-success mr-2">
                                                            <i class="fa fa-save"></i> @localizer["Save"]
                                                        </button>

                                                        <a asp-action="Index" asp-controller="Employee"
                                                           class="btn btn-mat btn-danger" style="color: white;">
                                                            <i class="fa fa-list"></i> @localizer["Cancel"]
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="page-header card">
                    <div class="card-block">
                        <ul class="">
                            <li class="breadcrumb-item pull-left">
                                <a onclick="window.history.back();"
                                   class="text text-danger font-weight-bold" style="cursor: pointer;">
                                    <i class="fa fa-arrow-left"></i> @localizer["Back"]
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>
@section Scripts{
    <script>

        function calculate() {
            var basicSalary = parseFloat($("#basicSalary").val());
            var totalDays = parseFloat($("#totalDays").val());
            var workDays = parseFloat($("#totalWorkingDays").val());
            var overTime = parseFloat($("#overTime").val());
            var bonus = parseFloat($("#bonus").val());
            var tax = parseFloat($("#tax").val());
            var res = basicSalary / totalDays;
            var bsalary = res * workDays;
            var total = bsalary + overTime + bonus - tax;
            $("#netSalary").val(total);
            var paid = parseFloat($("#paid").val());
            $("#balanced").val(total - paid);
        }
        calculate();
        $("#totalWorkingDays").on("input", function () {
            calculate();
        });
        $("#totalDays").on("input", function () {
            calculate();
        });
        $("#overTime").on("input", function () {
            calculate();
        });
        $("#bonus").on("input", function () {
            calculate();
        });
        $("#tax").on("input", function () {
            calculate();
        });
        $("#paid").on("input", function () {
            var net = parseFloat($("#netSalary").val());
            var paid = parseFloat($(this).val());
            $("#balanced").val(net - paid);
        });
    </script>
}